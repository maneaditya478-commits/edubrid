<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notes - EduBridge</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#764ba2">
    <link rel="stylesheet" href="css/notes.css">
    <link rel="stylesheet" href="css/theme.css">
    <script src="js/language.js"></script>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="logo">
                <span class="logo-icon">üéì</span>
                <h1 data-translate="common.logo">EduBridge</h1>
            </div>
            <nav class="nav">
                <a href="home.html" class="nav-link" data-translate="common.home">Home</a>
                <a href="quiz.html" class="nav-link" data-translate="common.quiz">Quiz</a>
                <a href="notes.html" class="nav-link active" data-translate="common.notes">Notes</a>
                <a href="mentor.html" class="nav-link" data-translate="common.mentor">Mentor</a>
                <a href="chat.html" class="nav-link">üí¨ Chat</a>
                <a href="profile.html" class="nav-link" data-translate="common.profile">Profile</a>
                <a href="contact.html" class="nav-link" data-translate="common.contact">Contact</a>
                <button class="btn btn-ghost" id="themeToggle" aria-label="Toggle dark mode">üåô</button>
                <button class="btn btn-outline" id="logoutBtn" data-translate="common.logout">Logout</button>
            </nav>
        </div>
    </header>

    <main class="main">
        <div class="container">
            <section class="notes-header">
                <h2>My Notes</h2>
                <p>Create, organize, and share your learning notes</p>
                <div class="notes-actions">
                    <button class="btn btn-primary" id="newNoteBtn">+ New Note</button>
                    <button class="btn btn-secondary" id="importNoteBtn">Import Note</button>
                    <button class="btn btn-secondary" id="syncNotesBtn">‚òÅÔ∏è Sync to Cloud</button>
                    <button class="btn btn-secondary" id="voiceNotesBtn">üéôÔ∏è Voice Guide</button>
                    <span class="sync-status" id="syncStatus"></span>
                    <span class="voice-status" id="voiceStatus"></span>
                </div>
            </section>

            <section class="note-editor" id="noteEditor" style="display: none;">
                <div class="editor-card">
                    <div class="editor-header">
                        <input type="text" id="noteTitle" placeholder="Note title..." class="title-input">
                        <div class="editor-actions">
                            <button class="btn btn-secondary" id="saveNoteBtn">Save</button>
                            <button class="btn btn-secondary" id="shareNoteBtn">Share</button>
                            <button class="btn btn-outline" id="cancelEditBtn">Cancel</button>
                        </div>
                    </div>
                    <div class="editor-content">
                        <textarea id="noteContent" placeholder="Write your note here..." class="content-textarea"></textarea>
                    </div>
                </div>
            </section>

            <section class="notes-grid" id="notesGrid">
                <div class="notes-list" id="notesList">
                    <!-- Notes will be dynamically loaded here -->
                </div>
            </section>

            <section class="shared-notes" id="sharedNotes" style="display: none;">
                <h3>Shared Notes</h3>
                <div class="shared-notes-list" id="sharedNotesList">
                    <!-- Shared notes will be displayed here -->
                </div>
            </section>
        </div>
    </main>

    <!-- Share Modal -->
    <div class="modal" id="shareModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Share Note</h3>
                <button class="modal-close" id="closeShareModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="share-options">
                    <div class="share-option">
                        <button class="btn btn-primary" id="copyLinkBtn">Copy Link</button>
                        <p>Share via link</p>
                    </div>
                    <div class="share-option">
                        <button class="btn btn-secondary" id="qrCodeBtn">QR Code</button>
                        <p>Generate QR code</p>
                    </div>
                    <div class="share-option">
                        <button class="btn btn-secondary" id="downloadBtn">Download</button>
                        <p>Download as text file</p>
                    </div>
                </div>
                <div class="share-link" id="shareLink" style="display: none;">
                    <label>Share Link:</label>
                    <input type="text" id="shareLinkInput" readonly>
                </div>
            </div>
        </div>
    </div>

    <script src="js/theme.js" defer></script>
    <script src="js/notes.js"></script>
    <script>
        // Register Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then((registration) => {
                        console.log('Service Worker registered:', registration.scope);
                    })
                    .catch((error) => {
                        console.log('Service Worker registration failed:', error);
                    });
            });
        }
    </script>
</body>
</html>
